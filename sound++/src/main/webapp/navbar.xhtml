<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.2.1/lux/bootstrap.min.css" />
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"></link>

        <h:outputStylesheet library="css" name="style.css"  />

        <title>Sound++</title>
    </h:head>
    <ui:composition>
        <nav class="navbar navbar-expand-lg navbar-light bg-light navbar-fixed-top" id="navsound">

            <h:link class="navbar-brand" outcome="index">
                <h:graphicImage class="logo" value="assets/logonav.PNG" />
            </h:link> 
        <h:outputScript library="js" name="jquery-1.12.4.js" target="head" />
        <h:outputScript library="js" name="search.js" target="head"/>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor03" aria-controls="navbarColor03" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarColor03">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <h:link class="nav-link" value="#{internationalization.home}" outcome="index"/>
                    </li>
                    <li class="nav-item">
                        <h:link class="nav-link" value="#{internationalization.albums}" outcome="albums"/>
                    </li>
                    <li class="nav-item">
                        <h:link class="nav-link" value="#{internationalization.tracks}" outcome="tracks"/>
                    </li>
                    <li class="nav-item">
                        <h:link class="nav-link" value="#{internationalization.about}" outcome="about"/>
                    </li>
                    <h:panelGroup rendered="#{empty user}">
                        <li class="nav-item">
                            <h:link class="nav-link" value="#{internationalization.login}" outcome="register"/>
                        </li>
                    </h:panelGroup>
                    <h:panelGroup rendered="#{not empty user}">
                        <li class="nav-item">
                            <h:link class="nav-link" value="#{internationalization.signOut}" outcome="register"/>
                        </li>
                    </h:panelGroup>
                    <li class="nav-item">
                        <h:link class="nav-link" value="#{internationalization.cart}" outcome="cart"/>
                    </li>
                </ul>

                <li class="nav-item dropdown" style="list-style-type:none">
                    <div class="form-group">
                        <h:form class="form-inline my-2 my-lg-0 ml-2">
                            <h:selectOneMenu onchange="submit()" valueChangeListener="#{internationalization.languageChange}"  class="custom-select mr-sm-3 ml-4">
                                <f:selectItem itemValue="en" itemLabel="#{internationalization.english}" />
                                <f:selectItem itemValue="fr" itemLabel="#{internationalization.french}" />
                            </h:selectOneMenu> 
                        </h:form>

                    </div>
                </li>

                <h:form class="form-inline my-2 my-lg-0 searchForm" >
                    <h:panelGroup id="input">
                        <h:inputText onfocus="showSearchList();" autocomplete="off" id="pattern" class="form-control mr-sm-2 patternTextBox" title="#{internationalization.search}" value="#{AlbumTrackBean.pattern}" >
                            <f:ajax event="keyup" listener="#{AlbumTrackBean.patternChanged()}" execute="pattern" render="searchList"></f:ajax>
                        </h:inputText>
                    </h:panelGroup>
                    <h:panelGroup id="searchList" class="searchList">
                        <ul class="list-group">
                            <ui:repeat value="#{AlbumTrackBean.albums}" var="album">
                                <li class="list-group-item d-flex justify-content-between align-items-center searchItem"> 
                                    <h:commandLink  value="#{album.title}" onclick="setPattern(this);">           
                                        <f:ajax />
                                    </h:commandLink>
                                    <span class="badge badge-primary badge-pill">Album</span> 
                                </li>
                            </ui:repeat>
                            <ui:repeat  value="#{AlbumTrackBean.tracks}" var="track">
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                     <h:commandLink  value="#{track.title}" onclick="setPattern(this);">           
                                        <f:ajax />
                                    </h:commandLink>
                                    <span class="badge badge-primary badge-pill">Track</span>
                                </li>
                            </ui:repeat>
                        </ul>
                    </h:panelGroup>
                    <h:commandButton class="btn btn-outline-primary" value="#{internationalization.search}"  action="#{AlbumTrackBean.redirect()}" />
                </h:form>
            </div>
        </nav>



    </ui:composition>
</html>
