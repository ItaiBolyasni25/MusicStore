<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.2.1/lux/bootstrap.min.css" />
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
        <h:outputStylesheet library="css" name="style.css"  />
        <h:outputScript library="js" name="jquery-1.12.4.js" />
        <h:outputScript library="js" name="itemInfo.js" />
        <title>Sound++</title>
    </h:head>
    <h:body>
        <ui:include src="navbar.xhtml" />
        <p id = "top"></p>
        <h:panelGroup id="table">
            <div id="albumTable">
                <h:dataTable class="table table-hover" value="#{AlbumPaginationBean.datalist}" var="album">
                    <h:column>
                        <f:facet name="header">
                            #{internationalization.albumimage}
                        </f:facet>
                        <h:graphicImage value="#{album.image}" title="Album's cover" class="albumPic"/>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            #{internationalization.albumtitle}
                        </f:facet>
                        <h:form>
                            <h:commandLink styleClass="customLink" value= "#{album.title}" action="#{selectedAlbum.editDataItem()}">
                                <f:setPropertyActionListener target="#{selectedAlbum.selectedAlbum}" value="#{album}" />
                                <f:ajax render="result"/>
                            </h:commandLink></h:form>

                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            #{internationalization.artist}
                        </f:facet>
                        <ui:repeat var="artist" value="#{album.artists}">
                            #{artist.name} 
                        </ui:repeat>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            #{internationalization.albumdate}
                        </f:facet>
                        <h:outputText value="#{album.releasedate}">
                            <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                        </h:outputText>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            #{internationalization.numberSongs}
                        </f:facet>
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            #{internationalization.cost}
                        </f:facet>
                        #{album.cost}
                    </h:column>

                </h:dataTable>
                <h:form>
                    <ul class="pagination" >
                        <c:if  test="#{AlbumPaginationBean.current_page != 1}">
                            <li class="page-item">
                                <h:commandLink class="page-link" value="&laquo;" actionListener="#{AlbumPaginationBean.prev()}"/>
                            </li>
                        </c:if>
                        <c:if  test="#{AlbumPaginationBean.current_page == 1}">
                            <li class="page-item disabled">
                                <h:commandLink class="page-link" value="&laquo;"/>
                            </li>
                        </c:if>
                        <c:forEach begin="1" end="#{AlbumPaginationBean.total_pages}" var="i" >
                            <li class="page-item #{AlbumPaginationBean.current_page == i ? 'active':''}">
                                <h:commandLink class="page-link" action="#{AlbumPaginationBean.updateView()}" value="#{i}">
                                    <f:setPropertyActionListener target="#{AlbumPaginationBean.current_page}" value="#{i}" />
                                    <f:ajax render="table"></f:ajax>
                                </h:commandLink>
                            </li> 
                        </c:forEach>
                    </ul>
                </h:form>
            </div></h:panelGroup>      
        <div class="card border-light mb-3" id ="info">
            <h:panelGroup id="result">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><h:link value = "Albums" id="albumList" /> </li>
                    <li class="breadcrumb-item active" id="titleAlbum">#{selectedAlbum.selectedAlbum.title}</li>
                </ol>
                <div class="card-body">
                    <p class ="imageContainer"><h:graphicImage value="#{selectedAlbum.selectedAlbum.image}" title="Album's cover" class="albumPic"/></p>
                    <div class="contentContainer">
                        <h4 class="card-title" id ="title">#{selectedAlbum.selectedAlbum.title}</h4>
                        <p class="card-text" id = "artist"><c:forEach items="#{selectedAlbum.selectedAlbum.artists}" var="artist">
                                <h:outputText value="#{artist.name}"></h:outputText>             
                            </c:forEach></p>
                        <p class="card-text" id = "review"></p>
                        <hr></hr>
                        <p class="card-text" id = "cost"></p>
                        <form class="form-inline my-2 my-lg-0" id="quantityContainer">
                            <label for="quantity" class="quantity">Quantity</label>
                            <select name = "quantity" class="custom-select">
                                <option selected="1" value="1">1</option>
                                <c:forEach var = "i" begin = "2" end = "100">
                                    <option value="${i}">${i}</option>
                                </c:forEach>
                            </select>
                            <button class="btn btn-secondary my-2 my-sm-0" value ="Add" action = "add">Add</button>
                        </form>
                    </div>
                </div>

                <div class = "detailInfo">
                    <h5 class="detail">DESCRIPTION</h5>
                    <hr class="style"></hr>
                    <div id="myTabContent" class="tab-content">
                        <div class="tab-pane fade show active" id="details">
                            <p id="releasedate"><span class="boldText">Original Release Date: </span>  <h:outputText value="#{selectedAlbum.selectedAlbum.releasedate}"></h:outputText>  </p>
                            <p id="addeddate"><span class="boldText">Added Date: </span> <h:outputText value="#{selectedAlbum.selectedAlbum.addedDate}"></h:outputText> </p>
                            <p id="label"><span class="boldText">Label: </span> <h:outputText value="#{selectedAlbum.selectedAlbum.label}"></h:outputText> </p>                       
                        </div>
                    </div>
                    <h5 class="detail">SIMILAR ALBUMS</h5>
                    <hr class="style"></hr>
                    <div class="row">
                        <ui:repeat value="#{selectedAlbum.getSimilarAlbum()}" var="similarAlbum">
                        <div class="column">
                            <h:graphicImage value="#{similarAlbum.image}" title="Album's cover" class="albumPic"/>
                            <p><ui:repeat var="artist" value="#{similarAlbum.artists}">
                            #{artist.name} 
                        </ui:repeat></p>
                        </div></ui:repeat>                    
                    </div>
                </div>
            </h:panelGroup> </div>
        <ui:include src="footer.xhtml" />
    </h:body>
</html>
